{% comment %}
自定义摘要生成函数
根据是否有封面图片动态调整摘要长度
{% endcomment %}

{% if include.params.article %}
  {% assign article = include.params.article %}
{% endif %}

{% if include.params.has_image %}
  {% assign has_image = include.params.has_image %}
{% else %}
  {% assign has_image = false %}
{% endif %}

{% if include.params.excerpt_size %}
  {% assign excerpt_size = include.params.excerpt_size %}
{% else %}
  {% comment %}
  根据是否有图片调整摘要长度：
  - 有图片时：100字符（约2-3行，与图片高度匹配，留空间给Read More）
  - 无图片时：180字符（约3-4行，正常长度，留空间给Read More）
  {% endcomment %}
  {% if has_image %}
    {% assign excerpt_size = 100 %}
  {% else %}
    {% assign excerpt_size = 180 %}
  {% endif %}
{% endif %}

{% assign _article = article | strip_html %}
{% assign return = _article | truncate: excerpt_size %}
